# IMU原理介绍及误差分析

 **Author:** [Huws]

 **Link:** [https://zhuanlan.zhihu.com/p/544296512]

## 前言  
 我们知道，单独的IMU估计位姿有累计误差，工作时间越长越不可靠，尤其是基于MEMS的IMU，精度比较差，但是我们不要因为MEMS器件巨大的常值零偏和全温零偏误差而轻易否定它、拒绝它，基本也不会有人只用基于MEMS的IMU来长时间估计状态，一般都是与其他传感器（GNSS、相机、激光雷达等）构成融合定位系统。那么在这样的情况下，IMU的常值零偏和缓慢零偏变化（包括温漂）以及零偏重复性一般都能被融合定位算法（例如Kalman滤波）有效地进行在线估计和补偿。说到融合定位，写这篇文章的初衷之一也是看到了乾神的一句话：“IMU基础是所有融合系统的重中之重，IMU器件也是任何融合系统的核心，很难想象有哪个融合定位系统不包含IMU的。在实际应用中，影响一个系统性能的往往不是功能算法（比如IMU的惯性解算），因为这些算法都是死的，只有对和错的区别，没有好和坏的区别（不能说按照同一个公式写出来的导航解算方法在性能上有的好有的坏），因此影响系统性能的多数是器件本身精度（随机游走、零偏不稳定性等）和器件参数精度（零偏、安装误差、刻度系数误差、温变参数等）。因此，在实际使用中，要想把系统性能提高，就应该在器件误差识别和补偿上不遗余力地去做才行。**因此对惯性器件及其误差模型的掌握，是做融合这件事的重中之重**。”

 在上一段话中，出现了很多高端的名词，很多人分不清 IMU零偏不稳定性和IMU随机游走，具体到底指什么，怎么产生的，又有什么区别和联系？（能回答上来这个问题的人，那IMU误差这块也被他摸的七七八八了），因此萌生了写一篇分析IMU误差文章的想法，我想尽量从**原理层面**分析为什么会出现这样的误差，如果我们能够从原理层面知道误差怎么来的，在此基础上再进一步分析，就能更好地理解这些误差的本质。本文不讲数学公式，只讲原理概念。

（PS：由于本人水平有限，文中疏漏之处也在所难免，希望各位大佬能指出文中的错误。另外在原理介绍的部分，借鉴了参考资料1，2。在误差分析部分借鉴了参考资料3，4，5）

## 捷联惯导系统  
 在我以前刚接触机器人的时候，就听说过什么捷联惯导之类的专业术语，那么捷联惯导到底是个啥意思呢。下面就来解释一下，通常而言，惯性系统有两种配置模式： 平台系统(Stable Platform System)和捷联系统(Strapdown System)。这两种配置模式最大的区别就是陀螺仪和加速度计的参考系不同，一个典型的惯导系统会涉及本体坐标系(Body Frame)和全局坐标系(Global Frame)，如下图所示。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-3200876a99c27233089bca09dcbef9cd_1440w.jpg)  


the body and global frames of reference

  
  
在平台系统中，惯性传感器被放置在与外部旋转运动隔离的平台上(与运动物体非刚体连接)，换句话说，惯性传感器始终与全局坐标系对齐。其实就是云台，惯性传感器被放置在一个与物体固联的云台上——随云台运动，但不随物体旋转。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-30256bc5ef3254e920af00d26628586d_1440w.gif)  


云台

  
  
如上图所示，可以看到相机不随无人机旋转。板载陀螺仪检测平台的任意旋转，然后通过云台的马达调整消除，从而保证整体平台稳定，姿态与全局坐标系对齐。对于平台系统，我们可以通过读取两个时刻云台三轴刻度的差异来获取物体的旋转，比较容易理解。而对于位置，由于测量平台始终和全局坐标系对齐，所以加速度计观测的加速度也是全局坐标系下的加速度。根据高中物理的基本知识，对加速度积分两次即可得到位移(在全局坐标系下)。当然需要注意的是，由于存在重力，在对加速度计积分前需要先设法消除重力的影响。所以，稳定平台惯性导航算法应该如下：

![]((20221208)IMU原理介绍及误差分析_Huws/v2-958344cf227c26bbefee204964912114_1440w.jpg)  


Stable platform inertial navigation algorithm

  
  
可以看到， 平台惯导整体算法流程还是比较简单的。由于与全局坐标系对齐，甚至直接读取云台的刻度就可以获得物体的姿态。同样，得益于坐标系对齐，加速度积分过程也避免了坐标转换。

所谓捷联系统，英文为Strapdown System。Strapdown这个单词的原意为“捆绑”。所以捷联系统就是指将惯性传感器直接“捆绑”到运动平台上，而非像稳定平台系统一样把惯性传感器放到云台上。所以也可以看出来，捷联系统中惯性传感器和运动平台直接相连，运动过程中相对关系不会改变，为刚体连接(mounted rigidly)；稳定平台系统中惯性传感器和运动平台通过云台相连，运动过程中相对关系会改变，为非刚体连接。一个典型的无人机捷联系统如下。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-6d3352e2fdca604b0b0ce8b94dbd7dc5_1440w.jpg)  


灰机

  
  
在上图中，IMU被牢牢绑在无人机上，随无人机一起运动。这就是一个典型的捷联系统。通过上面的描述可以看出，捷联系统从成本和配置上是最方便的，直接把传感器往运动平台上一贴就完事了(方便，省了云台的钱)。捷联系统拥有更少的机械复杂性，并且在尺寸上也可以做的比平台系统更小。当然，这样的代价就是计算复杂度增加了。但随着硬件的发展，计算能力越来越强，这个缺点也正慢慢被弥补，所以捷联系统也是在实际中被使用最多的系统。

对于捷联系统，需要注意的是所有的观测都是在本体坐标系下，而非全局坐标系。对于姿态，通过对陀螺仪的观测进行积分得到；对于位置，首先利用陀螺仪积分得到的姿态获得当前时刻本体坐标系相对于全局坐标系的变换，将加速度计的观测转换到全局坐标系下。在消除重力加速度影响后，对观测进行二次积分，最终即可得到全局坐标系下的位置。上述整体流程如下图所示。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-26d2196dbc1c4a7570f70d46b3654050_1440w.jpg)  


Strapdown inertial navigation algorithm

  
  
在捷联系统中，对于位置的计算不仅仅依赖于加速度计的观测，还会用到陀螺仪的观测，而这其实不可避免地引入了更多的误差源。而在平台系统中，由于本体坐标系时时刻刻与全局坐标系对齐，所以计算位置并不需要陀螺仪的参与，计算姿态和位置两者是完全独立的。但这两种系统计算位姿的基本原理是一样的。

## 陀螺仪原理介绍 （Gyroscpoe）  
陀螺仪一般有机械式陀螺，还有一听就觉得很厉害的光纤陀螺，还有最麻烦最棘手同时也是最便宜的微机电（MEMS）式陀螺。虽然这篇文章重点在于分析基于MEMS的IMU，但是也顺便了解一下其他原理的陀螺。

**机械陀螺**（Mechanical）的核心原理是角动量守恒(convservation of angular momentum)。当旋转轮高速旋转的时候，如果没有受到外界给它的力，那么它会一直转下去并且旋转轴不变。比如小时候玩的陀螺就是这样：在高速旋转的时候，陀螺会转的很稳，但因为存在和地面的摩擦力，陀螺的旋转逐渐变慢，最后倒下。对于陀螺仪而言，旋转轮一直保持姿态不变(陀螺的定轴性)，当物体运动的时候，万象架就会自然调整来反映这种姿态的变化，如下面的动图所示。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-1419559ca7dd8c52b620fdc2f084280b_1440w.gif)  


机械陀螺

  
  
最后，通过读取万象架上的刻度或者两个状态刻度的差异就可以得到运动物体的姿态或者姿态改变量。这便是机械式陀螺仪能用来测量姿态最基本的原理了。感兴趣的话可以参考[https://haokan.baidu.com/v?pd=wisenatural&vid=4917207119914294731](https://haokan.baidu.com/v?pd=wisenatural&vid=4917207119914294731)，说的也比较清楚。传统机械式陀螺仪测量的姿态，通过读取万象架上的刻度直接获得。这与目前主流的陀螺仪是不同的。目前主流陀螺仪测量的是角速度，所以又被称为rate-gyros。传统机械陀螺仪的一大问题在于需要包含一个运动部分(也就是转盘)。由于有摩擦力的存在，会导致误差随着时间慢慢增大(漂移)。因此为了解决这个问题，会像设备中加润滑油。当然这不可避免增加了成本。此外，传统机械式陀螺仪还需要几分钟来“热身”，才能使用，此外体积大，维护成本高，仅仅应用在极少数的场景。

**光线陀螺** (Optical)，光纤式陀螺仪(fibre optic gyroscope, FOG)使用光的干涉(interference)来测量角速度。光纤陀螺仪主要由光纤线圈构成，基于萨格纳克效应(Sagnac Effect)。简单来说就是：将同一光源发出的一束光分解为两束，让它们在同一个环路内沿相反方向循行一周后会合，然后在屏幕上产生干涉，当在环路平面内有旋转角速度时，屏幕上的干涉条纹将会发生移动，这就是萨格纳克效应，如下图所示。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-fd9649acab88e0bbf3db128dcedd84c2_1440w.jpg)  
通过测量干涉条纹移动的大小，就可以估计出旋转的角速度。此外，还有环状光纤陀螺仪，也叫做Ring laser gyroscopes(RLGs)。与FOG相比，RLG使用镜子来构造一个闭环光路，光线在这个光路中游走，而不是在光纤中传输。一组光纤绕组仅能对一个方向上的旋转进行测量，实际应用中常常使用3组光纤，在空间中正交排列，从而能够对空间中的任意旋转进行测量，如下图是一个三轴光纤陀螺的内部构造。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-e380f3432f6fe073985bfee56bdc9b3a_1440w.jpg)  


三轴光纤陀螺的内部构造

  
  
和上面介绍的机械式陀螺仪相比，光纤陀螺仪不包含运动部分，并且只需要几秒钟的时间来启动。光纤陀螺仪的精度很大程度上取决于光路的长度(越长越好)。当然光路的长度也是受设备的大小所限制的，不可能无限长。

**微机电式陀螺** （MEMS）

文章主角登场，我们来了解一下MEMS陀螺的原理，上面说的机械式和光纤式陀螺仪都有一个特点：就是精度比较高，但是很贵。作为对比，MEMS式的陀螺仪就便宜很多，当然精度也就稍差一些。MEMS全称Micro-Electro-Mechanical System，中文为微机电系统。感兴趣的话可以搜索更多资料，这里不再赘述。如同前面说的，机械式陀螺仪基于角动量守恒，光纤式陀螺仪基于萨格纳克效应，MEMS陀螺仪则是基于科里奥利效应(Coriolis Effect)。所谓科里奥利效应，对应一种实际并不存在的力——科里奥利力。在一个以角速度ω旋转的坐标系中，一个质量为m的物体以v速度运动，那么它将会收到一个力，这个力就是科里奥利力，计算公式如下。Fc=−2m(ω×v)，这样说可能比较抽象，下面的一段动图很好地解释了科里奥利效应。片段还是来自上面提到的那个视频。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-8b42ab41e6a98b51528bd3e50f556cc7_1440w.gif)  
可以看到，球在被人抛出以后，本身就不再受其它外力(重力、空气阻力等除外)。但在旋转的人视角看来，它却走出了一个曲线，而非直线。为了解释这种现象，就虚拟出了科里奥利力，它表示惯性作用和非惯性系之间的关系。科里奥利力产生的本质是有质量的物体具有惯性。那么MEMS式如何利用科里奥利力来获得角速度的呢？先介绍基本原理。简单来说，就是测量由于运动而产生的科里奥利力。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-789b9a2fa2490ae88cc385e4bd420b44_1440w.jpg)  
某个质量为m的物体水平方向有个速度为v的运动，同时又存在一个速度为ω的角速度。因此，它就会在垂直方向受到一个科里奥利力Fc。测量这个力，再根据上面的公式，可以看到，在已知质量m、速度v以及科里奥利力Fc的情况下，就很容易求得角速度ω。然后我们再介绍稍微实际一些的方法。上面说了，只要测量到了科里奥利力就可以求得角速度。那么科里奥利力如何测量呢？答案是可以通过微机械结构电容的变化来间接测量科里奥利力，如下图所示。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-6222c04907f55b9624868c8cd167b502_1440w.gif)  
首先，我们可以使用压电效应制作出一个在平面中往复振动的机构。当传感器发生特定方向的旋转时，该往复振动就变成了旋转体系中的径向运动，从而受到一个将振动体拉离振动平面的科里奥利力，振动体随之发生形变。传感器通过检测振动体与底面间的微小电容变化，来对旋转速度进行计算测量。所以一个MEMS陀螺仪测量角速度的流程就是，首先通过压电效应让某个质量为m的微机械结构以速度v径向运动。然后又通过电容的变化测量到科里奥利力Fc。这样再利用上面的公式就可以很容易算出在某个轴的角速度ω。MEMS陀螺体积小，成本低，广泛应用于消费电子。但它的缺点是测量精度低，零飘大，容易受到温度、振动的影响。

以上就是几种不同原理的陀螺仪了。

## 加速度计原理介绍 (Linear Accelerometer)  
相比于陀螺仪，加速度计的原理就好理解多了，

**机械式**，一个传统的机械式加速度计由固定着一个质量块的弹簧组成，如下图所示。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-b2b77cb460357daa547d69fd388e7e68_1440w.jpg)  


A mechanical accelerometer

  
  
在上图的装置中，我们可以通过刻度来获得质量块的位移，这个位移量是与施加在它上面的力F成比例的，所以我们可以根据位移反推施加的力F。再根据牛顿第二定律F=ma，此时F、m都已知，就可以求得测量方向上的加速度a了。原理非常简单。

**固态**，固态加速度计可以进一步分为表面声波类(Surface Acoustic Wave)、振动类(Vibratory)和石英类(Silicon and Quartz)。比较常见的是表面声波加速度计，如下图所示。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-c10b3af34bb9197bd44cbc6c1b752433_1440w.jpg)  


A surface acoustic wave accelerometer

  
  
其包含一个以特定频率振动的悬臂，一端固定在平台上，另一端固定了一个小质量块。当测量方向上有加速度的时候，悬臂就会弯曲。这就会导致悬臂的振动频率发生改变，并且这种改变是与施加在上面的力成比例的。通过测量频率的变化，我们就能间接测量得到力，再根据牛二定律，就可以计算出加速度。

**MEMS**，主要有两类MEMS传感器：第一类通过测量质量块的位移来推算加速度，原理与机械式加速度计相同；第二类通过测量振动单元频率的改变来推算加速度，原理与固态加速度计相同。MEMS加速度计的优缺点其实和前面说的MEMS陀螺仪的加速度计是一样的：尺寸小、质量轻、低功耗、启动快，劣势就是和传统加速度计相比不太精确。

## MEMS - IMU误差分析  
### 误差来源  
前面介绍了各种陀螺仪和加速度计的测量原理，也了解了基于MEMS的IMU怎么测量角速度和加速度的，那么误差从哪里来呢，我们知道原理归原理，原理上假设都是完美的，实际上随便想一下都能想到一些误差项，比如**安装误差**（3轴非正交误差）啦，**刻度误差**（测量值和真实值不一致）啦。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-e26edbed76b90f0469ad97fa90d39622_1440w.jpg)  


非正交误差

  
  
这些都是比较容易想到的确定性系统误差。在深究一点话，温度也影响会测量的值，这是为什么呢，前面提到了在 MEMS - IMU 中我们是通过检测电容的变化，那我们看一下平行板电容的决定公式 C= εS/4πkd ，其中，ε为极板间介质的介电常数，S为极板面积，d为极板间的距离。通常检测加速度也好，角速度也好，我们是通过检测这个d来算出电容的变化，这里架设了ε为极板间介质的介电常数是不变的，但是这个所谓介电常数是受温度影响的，好比我们拿一个100欧姆的电阻，它的实际电阻也会随着温度的变化而变化，如果导电介质是金属的话，因为当温度升高时，金属中分子热运动加剧，电阻就会变大，因为电子流通性变小了，当然这是一般温度范围，超高、低温超导体不在这个讨论范围内。如果导电介质是电解液，当温度升高时，由于正、负离子运动加快，电阻反而减小，说了这么多，就是想说，板间介质的介电常数是会随着温度变化的，同样的加速度。角速度，在不同的温度下可能测量的值不同，这就导致了IMU的**温漂现象**，但我们平时好像都是说什么陀螺仪温漂，那加速度计呢？其实加速度计也一样哈，也会有温度漂移，但惯导系统的精度主要取决于IMU中的陀螺器件精度，而不是加速度计精度，这个也好理解，直线上差几个百分点，你好歹还在这条线上，如果你转一圈，角度差1%就是3.6度。。你角度多偏一些，你定位都不知道到哪里去了。所以我们也主要关注陀螺仪，加速度的分析思路和陀螺仪也是一样的哈。我们把陀螺仪静置在桌面不动，温度的变化可能导致陀螺仪测多一些也可能测少一些，可以理解为零偏的变化，但这个变化的大小和温度是能成一定的线性关系的，所以我们能用一个系数来描述温度的影响，这个误差就叫全温零偏误差：英文是bias error over temperature，或者叫**零偏的温度敏感系数**（例如0.01 deg/s/℃），这个系数反映了器件参数的温度敏感性。就是指陀螺零偏在其额定工作温度范围内相对于室温零偏值的变化量，对于传统惯性器件，一般是逐个做了温漂补偿的，因此这个全温零偏误差就是温补后的残差；而对于低端MEMS芯片，不可能逐个做温漂标定和补偿，所以只能给你这么个敏感系数了。

上面我们提到了全温零偏误差，MEMS零偏的温度敏感系数这个指标使我们需要关注的重要指标，因为MEMS器件的温漂是其内在的关键误差之一，除此之外，还有常值零偏，零偏上电重复性和零偏不稳定性，最后还有零偏的加速度敏感性。零偏的英文是bias，准确的说，IMU静置的时候测量的偏置量（bias）才能叫**零**偏，但是IMU运动的时候一样也有bias，这时候还叫零偏感觉有点不太准确，还是bias这词最准确。我们要知道，零偏其实只有一个，至少从IMU数值上来看是这样，你能测量得到一个零偏，但是影响零偏的因素有很多。

**常值零偏**：这个比较好理解，也就是这只陀螺生产出来后就一直固定不变的零偏值。在MEMS中，可能是微机电结构中的带电质量块在电容板中的位置不准确，就产生了这样的固定零偏。对于传统的高性能惯性器件来说，该误差在出厂标定时往往就被补偿干净了，因此不会标注这个指标；但对于低端MEMS IMU芯片来说（例如用在手机中的价格不到10块钱的芯片），则不可能做逐个的标定和补偿，因此常会存在deg/s（也就是几千deg/h）量级的常值零偏。这看上去巨大无比，但我们在实际使用中很容易对付，例如在初始启动过程中利用几秒钟的静态数据求平均即可扣掉大部分。

**零偏重复性**：全称是零偏逐次上电重复性（run-to-run repeatability），这是传统惯性器件的经典指标，是指惯性器件不同次上电运行时的零偏的不重复程度。具体测量方法是在常温下将器件多次上电，测量和记录每次上电的零偏数值，然后统计其差异。很多新手会好奇，一个传感器的零偏值每次上电的变化能有多大？这么细微的误差因素都需要考虑？这是因为传统惯性器件在出厂环节就把常值误差和温漂误差等主要误差都已仔细补偿掉了，因此逐次上电重复性这个次要误差才成为了一个不可忽视的主要误差。对于咱MEMS来说，这一项其实无所谓，反正我们在静止初始启动过程中会利用几秒钟的静态数据求平均来得到一个bias,这个bias就包括了常值零偏和上电重复性带来的零偏漂移，每次上电不管你漂了多少，反正每次上电测个几秒就行了。也因为零偏重复性的存在才导致我们不得不每一次上电就重新测一次bias。

**零偏稳定性**：严格来说应该称为**零偏不稳定性**（in-run instability），反映器件上电稳定后其零偏随时间变化的情况（这里指温度恒定的情况下的零偏漂移，和温漂区分开哈），至于产生的原因，主要是由于电子器件的闪变噪声(Flicker Noise)影响，导致零偏或者说偏置随时间游走。根据具体测算方法又分为两种：

a)我国的国军标定义的零偏不稳定性：采集几个小时的静态数据，每10秒或100秒求平均（以便抑制器件白噪声的影响），然后统计这些平均值的标准差。

b)Allan方差给出的零偏不稳定性：采集足够长时间的静态数据（一般大于10小时，越高等级的器件所需时间越长），画Allan方差曲线，取其谷底值。

前者对惯导的实际表现有比较直接的影响，有现实指导意义；而后者则只是反映器件在极端理想条件下的性能极限，缺乏现实意义。从具体数值来看，前者也比后者大几倍甚至高一个量级。有些国内同行将国军标指标称为“零偏稳定性”，而将Allan方差指标称为“零偏不稳定性”，以示区别，但我觉得这在文字表述上会造成困扰，因此更倾向于称它们是两种零偏不稳定性指标。

**零偏的加速度敏感性**：英文是g-sensitivity或linear acceleration effect。陀螺的输出本来应该对加速度完全不敏感，但由于其敏感结构的加工误差等因素，多少还是会受到线加速度影响的。（这里我举个例子，你现在有一个机械式的陀螺仪在手上，里面有个陀螺在飞快的转，你现在沿着转轴的方向给它来一个加速，那么转轴和底部接触的地方会受到一个惯性力（类似于电梯突然上升时候的超重），这个力会给转轴带来额外的摩擦力，这一瞬间，你测量的角速度会偏小）。我们就用零偏的加速度敏感性来描述。显然，这种零偏误差只有在强动态载体上才会造成显著影响，而对于常见车载、船载低动态载体往往可以忽略。需要注意的是，越是高灵敏度的MEMS陀螺，其微机械结构的敏感质量越大，因此其加速度敏感性往往会比较大，例如某高端MEMS陀螺的加速度敏感性为18 deg/h/g。

上面介绍了五种零偏误差类型，其实我们主要关注两个，一个是温敏系数，一个是零偏不稳定性，因为常值零偏和零偏上电偏差，都能通过静止初始化来估计，而g-sensitivity，在常见的机器人上一般影响比较小，可以忽略不计。

**噪声(noise)**，所有传感器都有噪声，一般可以简单理解为高斯白噪声。那么噪声是怎么来的呢，内部的话可以是IMU本身测量精度不够，比如在模电转换数电的时候，要看采样AD器件的精度，这里会引入误差，简单来说本来就测不准。外部的原因可以是机械震动，一般这种MEMS你加一个减震（海绵之类的），能稍微减轻测量到的噪声。

**角度随机游走(ARW, Angle Random Walk)**，描述**噪声(noise)**性能的指标:**随机游走就是白噪声的积分**。产生原因：计算姿态的本质是对角速率做积分，这必然会对噪声也做了积分。白噪声的积分并不是白噪声，而是一个马尔可夫过程，即当前时刻的误差是在上一时刻误差的基础上累加一个随机白噪声得到的。角度误差中所含的马尔可夫性质的误差，称为角度随机游走。这里可能读者还是不太明白，我举一个简单的例子，假设噪声服从0均值的高斯分布，你角速度的测量每一次都是独立的，和上一次没有关系的，这时候测量噪声服从高斯分布没问题，但是积分是和上一次的值有关系的，你每次得到的角度和每次测量得到的角速度并不是独立的，所以角速度积分得到的角度就不能在符合高斯分布了，咱说的再直白点，咱每一次角速度测量值可能多一点可能少一点，一段时间后，你知道最后积分的角度是多一点还是少一点吗？你不知道，这东西完全是随机的，这就是角度随机游走。注意：既然是噪声的指标，那么就是统计学指标，是随机变量，这种噪声是不能出厂前校准的。

### 误差分类  
上面我们分析了好多误差种类的误差，是不是头都有点迷糊了。这里赶紧来给他们分一个类，如下图

![]((20221208)IMU原理介绍及误差分析_Huws/v2-7db4d3d56b047565498e116a2b6ee5ae_1440w.jpg)  


IMU误差分类

  
  
这些误差可以分为两类 **确定性误差** 和 **随机误差** ， 确定性误差主要是**非正交误差和比例误差**，可以通过六面法标定，随机误差主要是 **噪声**（每一次的测量值里面都包含有噪声，高频） 、**零偏**（上电后也会随时间随机缓慢漂移，你无法从单次的测量值里面看出来零偏的存在，你得测量一段时间，你才知道测量的角速度在缓慢漂移，低频）。我们可以通过艾伦方差分析法来得到他们（各种随机误差，比如噪声，角度速度随机游走，零偏不稳定性，角速度、加速度随机游走等）的波动程度。

所以我们一般看到的那些IMU的建模方程怎么建的哇, 在标定之后，测量值 = 真实值 + 噪声 + 偏置，公式如下：

$\omega_{m} = \omega_{t}+ \eta + b$ 

但陀螺仪的加速度也一样哈，不写了，在融合系统里面，不管是什么原因导致的bias漂移，温度漂移也好，自身的不稳定性漂移也好，我们把bias看成一个待估计的参数，放到优化方程里面去计算，反正只要把 bias 的漂移量估计出来就行了，管他是什么原因造成的。

## 总结  
最后在总结的时候，再次借用乾神的话语：“算法会随着器件精度的变化而变化，而且这种变化是巨大的。由于现在各种类型的惯性器件在市场上共存，但是每个应用领域接触的器件却基本都是同一等级的，比如常见的手机导航、机器人、自动驾驶、测绘、军用，等级分明。如果只接触过其中一个领域，容易理所当然地认为其他领域也应该是这样。有时候两个做导航的坐在一起，但是话却永远说不到一块去，很多时候就是这个原因导致的。，面对这种情况，我们一方面要尽可能多接触不同领域的方法，这也能为自己的工作提供借鉴，另一方面，要进入到算法背后，了解其本质，如果明白造成这种差异的理论原因，那么就能把对经验的依赖尽可能降低。”

就拿标定来说，纯惯导，和融合惯导，这两者的标定可以说天差地别，一般做融合惯导的拿着低精度MEMS-IMU，六面法标一下尺度误差，刻度误差，用艾伦方差算一下噪声密度，角度随机游走的程度就差不多了。如果是纯惯导，或者说高精度融合惯导，要考虑的因素可就多了，要用到转台标定。。咱低端MEMS就几块钱十来块钱的东西咋可能用一个转台标。然后建模，我们一般都没有考虑地球自转的印象，加速度对陀螺仪的影响（一般消费级的产品不用考虑这么多），所以做不同领域的惯导，真的是认知不一样的，但是今天我们讨论了很多IMU原理上的东西，讨论了很多误差，希望对大家有帮助吧，我词穷了。

前面罗里吧嗦地说了一大堆，相信你也能回答上来在前言的那个问题了。

Q：陀螺仪的零偏不稳定性和角度随机游走，具体到底指什么，怎么产生的，又有什么区别和联系？

A：这的确是容易混淆的两个概念，因为他们有一个共同点，那就是都会“漂”。陀螺仪的零偏不稳定性主要是由于电子器件受到闪变噪声(Flicker Noise)影响，导致零偏或者说偏置随时间游走，本质上是一种由IMU内部构造、制造工艺等原因引起的内部误差，所以测量出来的角速度数据就是在随时间缓慢变化的，这是测量出的**角速度漂移**。而陀螺仪的角度随机游走是因为对测量白噪声进行了积分，而白噪声的积分并不是白噪声，从而导致了角度的随机游走，所以本质上是由于测量噪声的积累导致的**角度漂移**。所以这两压根不是一回事哈。再总结一下，测量噪声（0均值的高斯白噪声）不会导致测量的角速度漂移，但测量的噪声的积累（积分）会导致角度漂移；而陀螺仪的零偏不稳定性会直接导致测量的角速度漂移。

而且在融合定位系统中，这两个参数也是关键参数，比如在VINS和ORB-SLAM3中，在他们的配置文件中的IMU内参数就是陀螺仪和加速度计的噪声标准差，和零偏游走的标准差，如下图。有了这些参数，我们就能据此给IMU的预积分误差项设置一个协方差。

![]((20221208)IMU原理介绍及误差分析_Huws/v2-a92dc7b605bd87ab4d98cece939f14d1_1440w.jpg)  


Vins\_Fusion配置文件中的IMU内参数

  
  
希望读者现在对IMU的原理和误差有一个比较清晰的认识了，如果有什么问题欢迎在评论区问我，最后请大佬们指出文中的错误，感谢。完结撒花~ ✿✿ヽ(°▽°)ノ✿

## 参考资料  
1.《An Introduction to Inertial Navigation》, Oliver J. Woodman 

2. [http://zhaoxuhui.top/blog/2022/02/11/basic-notes-on-imu-and-inertial-navigation.html](http://zhaoxuhui.top/blog/2022/02/11/basic-notes-on-imu-and-inertial-navigation.html)

3. [http://i2nav.com/index/newListDetail\_zw.do?newskind\_id=13a8654e060c40c69e5f3d4c13069078&newsinfo\_id=43bf2e0076d947aba8b58725ad8f5c15](http://i2nav.com/index/newListDetail\_zw.do?newskind\_id=13a8654e060c40c69e5f3d4c13069078&newsinfo\_id=43bf2e0076d947aba8b58725ad8f5c15)

4. [https://zhuanlan.zhihu.com/p/40872376](https://zhuanlan.zhihu.com/p/40872376)

5. [https://zhuanlan.zhihu.com/p/114411107](https://zhuanlan.zhihu.com/p/114411107)

